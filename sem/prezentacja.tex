\documentclass{beamer}

\usepackage[utf8]{inputenc}
\usepackage{textcomp}
\usepackage[official]{eurosym}
\usepackage[polish]{babel}
\usepackage{amsthm}
\usepackage{graphicx}
\usepackage[T1]{fontenc}
\usepackage{scrextend}
\usepackage{hyperref}
\usepackage{xcolor}
\usepackage{listings}

\usetheme{default}
\usecolortheme{seahorse}

\title{Viua VM w akcji}
\subtitle{Implementacja wysokopoziomowego języka programowania i realizacja prostej aplikacji}
\author{Marek Marecki \and Krzysztof Franek}

\begin{document}
\lstset{basicstyle=\ttfamily\color{black},
columns=fixed,
escapeinside={\%*}{*)},
inputencoding=utf8,
extendedchars=true,
moredelim=**[is][\color{red}]{@}{@}}

%% PLAN PREZENTACJI
%%
%% Powinniśmy się zamknąć w maksimum 15 slajdach.
%%
%% 00. slajd tytułowy
%%
%% 01. początki Viua VM
%% 02. podział pracy w projekcie
%%
%% 03. o języku (elementy)
%% 04. ciekawostka: aktory
%% 05. przykład składni (wszystkie elementy języka w jednej funkcji); wiele slajdów "fizycznych", ale jeden
%%     "logiczny", bo na każdym fizycznym to samo tylko inny element podkreślony kolorem
%% 06. o kompilatorze (fazy, elementy)
%% 07. ciekawostka: analiza składniowa (tokeny fantomowe, pierwszy token decyduje)
%%
%% 08. o czacie
%% 09. ...
%% 10. ...
%% 11. ...
%% 12. ...
%% 13. ???
%% 14. profit!
%%

\frame{\titlepage}

\begin{frame}
    \frametitle{Viua VM -- tytułem wstępu}

    Viua VM to projekt rozpoczęty w połowie grudnia 2014.

    ~\\

    Jest to maszyna wirtualna wykorzystująca model aktorów jako główny model przetwarzania.
    Możliwe jest jej programowanie w języku assemblera, a programy są sekwencjami instrukcji modyfikujących
    stan zestawu rejestrów oferowanego przez ISA maszyny.

    ~\\

    Projekt jest udostępniany na licencji GNU GPL v3.
\end{frame}

\begin{frame}
    \frametitle{Zakres pracy inżynierskiej}
    \framesubtitle{Podział zadań}

    Marek Marecki:
    \begin{enumerate}
        \item specyfikacja języka programowania ViuAct
        \item implementacja kompilatora języka ViuAct
    \end{enumerate}

    ~\\

    Krzysztof Franek:
    \begin{enumerate}
        \item specyfikacja wymagań dla programu ViuaChat
        \item implementacja programu ViuaChat w języku ViuAct
    \end{enumerate}
\end{frame}

\begin{frame}
    \frametitle{ViuAct}
    \framesubtitle{Krótko o języku}

    Język ViuAct zapewnia dostęp do większości mechanizmów oferowanych przez Viua VM.

    ~\\

    Jest językiem opartym na wyrażeniach (większość konstrukcji to wyrażenia), ze składnią podobną do Lispa.
    Programy pisane w ViuAct składają się z funkcji porozmieszczanych w modułach.

    ~\\

    Model wykonywania programów jest wzorowany na modelu aktorów.
\end{frame}

\begin{frame}[fragile]
    \frametitle{Przykład kodu}
    \framesubtitle{Wszystkie konstrukcje w ViuAct}

    \begin{small}
    \begin{lstlisting}
(let countdown (n) {
    (let x (try (Std.Actor.receive 1s) (
        (catch Exception _
            (tailcall countdown n)))))

    (let wrapped (struct))
    (:= wrapped.value x)
    (:= wrapped.sequence (Std.copy n))
    (actor f wrapped)

    (if (= n 0) 0 (tailcall countdown (- n 1)))
})
    \end{lstlisting}
    \end{small}
\end{frame}

\begin{frame}[fragile]
    \frametitle{Przykład kodu}
    \framesubtitle{Nazwa i parametry formalne}

    \begin{small}
    \begin{lstlisting}
(let @countdown@ (@n@) {
    (let x (try (Std.Actor.receive 1s) (
        (catch Exception _
            (tailcall countdown n)))))

    (let wrapped (struct))
    (:= wrapped.value x)
    (:= wrapped.sequence (Std.copy n))
    (actor f wrapped)

    (if (= n 0) 0 (tailcall countdown (- n 1)))
})
    \end{lstlisting}
    \end{small}
\end{frame}

\begin{frame}[fragile]
    \frametitle{Przykład kodu}
    \framesubtitle{Ciało funkcji}

    \begin{small}
    \begin{lstlisting}
(let countdown (n) @{
    (let x (try (Std.Actor.receive 1s) (
        (catch Exception _
            (tailcall countdown n)))))

    (let wrapped (struct))
    (:= wrapped.value x)
    (:= wrapped.sequence (Std.copy n))
    (actor f wrapped)

    (if (= n 0) 0 (tailcall countdown (- n 1)))
}@)
    \end{lstlisting}
    \end{small}
\end{frame}

\begin{frame}[fragile]
    \frametitle{Przykład kodu}
    \framesubtitle{Odebranie wiadomości (wywołanie funkcji z modułu)}

    \begin{small}
    \begin{lstlisting}
(let countdown (n) {
    (let x (try (@Std.Actor.receive 1s@) (
        (catch Exception _
            (tailcall countdown n)))))

    (let wrapped (struct))
    (:= wrapped.value x)
    (:= wrapped.sequence (Std.copy n))
    (actor f wrapped)

    (if (= n 0) 0 (tailcall countdown (- n 1)))
})
    \end{lstlisting}
    \end{small}
\end{frame}

\begin{frame}[fragile]
    \frametitle{Przykład kodu}
    \framesubtitle{Obsługa wyjątków (słowa kluczowe)}

    \begin{small}
    \begin{lstlisting}
(let countdown (n) {
    (let x (@try@ (Std.Actor.receive 1s) (
        (@catch@ Exception _
            (tailcall countdown n)))))

    (let wrapped (struct))
    (:= wrapped.value x)
    (:= wrapped.sequence (Std.copy n))
    (actor f wrapped)

    (if (= n 0) 0 (tailcall countdown (- n 1)))
})
    \end{lstlisting}
    \end{small}
\end{frame}

\begin{frame}[fragile]
    \frametitle{Przykład kodu}
    \framesubtitle{Obsługa wyjątków (wyrażenie chronione)}

    \begin{small}
    \begin{lstlisting}
(let countdown (n) {
    (let x (try (@Std.Actor.receive 1s@) (
        (catch Exception _
            (tailcall countdown n)))))

    (let wrapped (struct))
    (:= wrapped.value x)
    (:= wrapped.sequence (Std.copy n))
    (actor f wrapped)

    (if (= n 0) 0 (tailcall countdown (- n 1)))
})
    \end{lstlisting}
    \end{small}
\end{frame}

\begin{frame}[fragile]
    \frametitle{Przykład kodu}
    \framesubtitle{Obsługa wyjątków (wyłapanie wyjątku)}

    \begin{small}
    \begin{lstlisting}
(let countdown (n) {
    (let x (try (Std.Actor.receive 1s) (
        @(catch Exception _@
            (tailcall countdown n)@)@)))

    (let wrapped (struct))
    (:= wrapped.value x)
    (:= wrapped.sequence (Std.copy n))
    (actor f wrapped)

    (if (= n 0) 0 (tailcall countdown (- n 1)))
})
    \end{lstlisting}
    \end{small}
\end{frame}

\begin{frame}[fragile]
    \frametitle{Przykład kodu}
    \framesubtitle{Obsługa wyjątków (wyrażenia obsługi)}

    \begin{small}
    \begin{lstlisting}
(let countdown (n) {
    (let x (try (Std.Actor.receive 1s) (
        (catch Exception _
            (@tailcall countdown n@)))))

    (let wrapped (struct))
    (:= wrapped.value x)
    (:= wrapped.sequence (Std.copy n))
    (actor f wrapped)

    (if (= n 0) 0 (tailcall countdown (- n 1)))
})
    \end{lstlisting}
    \end{small}
\end{frame}

\begin{frame}[fragile]
    \frametitle{Przykład kodu}
    \framesubtitle{\emph{let-binding} (dowiązanie zmiennej)}

    \begin{small}
    \begin{lstlisting}
(let countdown (n) {
    (let x (try (Std.Actor.receive 1s) (
        (catch Exception _
            (tailcall countdown n)))))

    (@let wrapped (struct)@)
    (:= wrapped.value x)
    (:= wrapped.sequence (Std.copy n))
    (actor f wrapped)

    (if (= n 0) 0 (tailcall countdown (- n 1)))
})
    \end{lstlisting}
    \end{small}
\end{frame}

\begin{frame}[fragile]
    \frametitle{Przykład kodu}
    \framesubtitle{Konstruktor \emph{\texttt{struct}}}

    \begin{small}
    \begin{lstlisting}
(let countdown (n) {
    (let x (try (Std.Actor.receive 1s) (
        (catch Exception _
            (tailcall countdown n)))))

    (let wrapped (@struct@))
    (:= wrapped.value x)
    (:= wrapped.sequence (Std.copy n))
    (actor f wrapped)

    (if (= n 0) 0 (tailcall countdown (- n 1)))
})
    \end{lstlisting}
    \end{small}
\end{frame}

\begin{frame}[fragile]
    \frametitle{Przykład kodu}
    \framesubtitle{Przypisanie do pola struktury}

    \begin{small}
    \begin{lstlisting}
(let countdown (n) {
    (let x (try (Std.Actor.receive 1s) (
        (catch Exception _
            (tailcall countdown n)))))

    (let wrapped (struct))
    (@:= wrapped.value x@)
    (:= wrapped.sequence (Std.copy n))
    (actor f wrapped)

    (if (= n 0) 0 (tailcall countdown (- n 1)))
})
    \end{lstlisting}
    \end{small}
\end{frame}

\begin{frame}[fragile]
    \frametitle{Przykład kodu}
    \framesubtitle{Wywołanie aktora}

    \begin{small}
    \begin{lstlisting}
(let countdown (n) {
    (let x (try (Std.Actor.receive 1s) (
        (catch Exception _
            (tailcall countdown n)))))

    (let wrapped (struct))
    (:= wrapped.value x)
    (:= wrapped.sequence (Std.copy n))
    (@actor@ f wrapped)

    (if (= n 0) 0 (tailcall countdown (- n 1)))
})
    \end{lstlisting}
    \end{small}
\end{frame}

\begin{frame}[fragile]
    \frametitle{Przykład kodu}
    \framesubtitle{Konstrukcja warunkowa}

    \begin{small}
    \begin{lstlisting}
(let countdown (n) {
    (let x (try (Std.Actor.receive 1s) (
        (catch Exception _
            (tailcall countdown n)))))

    (let wrapped (struct))
    (:= wrapped.value x)
    (:= wrapped.sequence (Std.copy n))
    (actor f wrapped)

    (@if (= n 0) 0 (tailcall countdown (- n 1))@)
})
    \end{lstlisting}
    \end{small}
\end{frame}

\begin{frame}[fragile]
    \frametitle{Przykład kodu}
    \framesubtitle{Konstrukcja warunkowa (wyrażenie sprawdzane; wywołanie operatora)}

    \begin{small}
    \begin{lstlisting}
(let countdown (n) {
    (let x (try (Std.Actor.receive 1s) (
        (catch Exception _
            (tailcall countdown n)))))

    (let wrapped (struct))
    (:= wrapped.value x)
    (:= wrapped.sequence (Std.copy n))
    (actor f wrapped)

    (if (@= n 0@) 0 (tailcall countdown (- n 1)))
})
    \end{lstlisting}
    \end{small}
\end{frame}

\begin{frame}[fragile]
    \frametitle{Przykład kodu}
    \framesubtitle{Konstrukcja warunkowa (...jeśli prawda)}

    \begin{small}
    \begin{lstlisting}
(let countdown (n) {
    (let x (try (Std.Actor.receive 1s) (
        (catch Exception _
            (tailcall countdown n)))))

    (let wrapped (struct))
    (:= wrapped.value x)
    (:= wrapped.sequence (Std.copy n))
    (actor f wrapped)

    (if (= n 0) @0@ (tailcall countdown (- n 1)))
})
    \end{lstlisting}
    \end{small}
\end{frame}

\begin{frame}[fragile]
    \frametitle{Przykład kodu}
    \framesubtitle{Konstrukcja warunkowa (...jeśli fałsz)}

    \begin{small}
    \begin{lstlisting}
(let countdown (n) {
    (let x (try (Std.Actor.receive 1s) (
        (catch Exception _
            (tailcall countdown n)))))

    (let wrapped (struct))
    (:= wrapped.value x)
    (:= wrapped.sequence (Std.copy n))
    (actor f wrapped)

    (if (= n 0) 0 (@tailcall countdown (- n 1)@))
})
    \end{lstlisting}
    \end{small}
\end{frame}

\begin{frame}[fragile]
    \frametitle{Przykład kodu}
    \framesubtitle{Wywołanie \emph{tailcall}}

    \begin{small}
    \begin{lstlisting}
(let countdown (n) {
    (let x (try (Std.Actor.receive 1s) (
        (catch Exception _
            (tailcall countdown n)))))

    (let wrapped (struct))
    (:= wrapped.value x)
    (:= wrapped.sequence (Std.copy n))
    (actor f wrapped)

    (if (= n 0) 0 (@tailcall@ countdown (- n 1)))
})
    \end{lstlisting}
    \end{small}
\end{frame}

\begin{frame}
    \frametitle{ViuaChat}
    \framesubtitle{Chat w Viua}

    ViuaChat czyli chat w Viua

    \begin{enumerate}
        \item ViuaChat
        \item ViuAct
        \item ???
        \item Tytuł inżyniera (Profit!)
    \end{enumerate}
\end{frame}

\end{document}
